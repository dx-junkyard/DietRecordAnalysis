# DietRecordAnalysis

## 0. 対象環境
- Mac or Linux
- Python 3.8.3 で動作確認できています
- Dockerがインストールされている必要があります
- 必要ディスク容量(1947-05-20〜2021-12-22の議事録を扱う場合) : download file 65.25GB, DB(importに必要) 33.69GB


## 1. 手順

### 1-1. 国会会議録をダウンロードする
```
sh download_record_of_Diet_proceedings.py
```


### 1-2. MySQLを起動する
```
docker-compose up -d
```


### 1-3. ダウンロードした国会会議録をMySQLにインポートする
```
sh import_all_diet_record.sh
```


## 2. 使い方

### 2-1. 【抽出】DBからキーワードで発言を抽出
以下は1947〜2022年に行われた発言のうち、「鉄道」を含む発言を各年ごとに「鉄道」ディレクトリに出力する
```
python KeywordAnalysis-YearlyDetail.py  1947 2022 鉄道
```

### 2-2. 【分析】その年の中心的話題順に上位50を抽出
#### 2-2-1. 処理内容
以下の処理を行う。
- DBから「鉄道」を含む発言を抽出
- 抽出結果から中心的話題順に上位50件を各年ごとに「鉄道_sorted」以下のcsvファイルに出力

#### 2-2-2. コマンド例
例えば以下のコマンドはDBから「鉄道」で抽出した1947〜2022年の発言について、中心的話題順に年ごとに上位50件を抽出する。
```
python YearlyAnalysis_by_CentralSpeech.py 1947 2022 鉄道
```

### 2-3. 発言者の立場を考慮した分析
#### 2-3-1. 処理内容
以下の処理を行う。
- DBから「鉄道」の発言で抽出結果を発言者の立場でフィルター
- その中から各年ごとの中心的な話題順にソートし、上位50件を各年ごとに「鉄道_sorted」以下のcsvファイルに出力

#### 2-3-2. コマンド例
以下のコマンドはDBから「鉄道」で抽出した1947〜2022年の結果に対して「運輸」「交通」「鉄道」を含む立場（例えば「運輸大臣」）でフィルターし、中心的話題順に年ごとに上位50を抽出する。
```
python YearlyAnalysis_by_SpeakerPosition.py 1947 2022 鉄道 "運輸,交通,鉄道"
```
